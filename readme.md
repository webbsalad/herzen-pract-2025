# Отчет по практике в ЦБС Петроградского района

## Инвариантная работа

1. **Освоение среды управления задачами Yougile**  
   В ходе практики было проведено изучение и освоение среды управления задачами Yougile. Были рассмотрены основные функции платформы, такие как создание задач, их распределение между сотрудниками, отслеживание статусов выполнения и аналитика по выполненным задачам.  

2. **Исследование используемых методов в ЦБС Петроградского района**  
   Проведен анализ методов и процессов, используемых в Централизованной библиотечной системе Петроградского района. Особое внимание уделено организации работы с заявками, распределению задач между сотрудниками и мониторингу их выполнения.  

---

## Вариативная работа

### Разработка Telegram-бота для отправки мониторинга статуса заявок работников  
Был разработан Telegram-бот, предназначенный для автоматизации процесса работы с заявками в ЦБС Петроградского района. Бот позволяет:  
- Библиотекарям отправлять заявки на выполнение задач.  
- Администраторам распределять заявки между инженерами.  
- Инженерам отмечать заявки как выполненные.  

#### В ходе выполнения вариативной работы было сделано:  

1. **Продуманы таблицы и написаны миграции для базы данных**  
   Разработана структура базы данных для хранения информации о пользователях, заявках и их статусах.  

2. **Выбрана библиотека для разработки бота и реализован слой представления**  
   Для разработки бота выбрана библиотека `python-telegram-bot`, а также реализован слой представления для взаимодействия с пользователями.  

3. **Реализована обработка команды `/start` (регистрация пользователей)**  
   Добавлена возможность регистрации пользователей при первом запуске бота.  

4. **Добавлена функция установки пароля от администратора**  
   Реализована возможность установки пароля администратором для управления доступом.  

5. **Реализован функционал просмотра заявок для администратора**  
   Администраторы получили возможность просматривать все заявки и их статусы.  

6. **Реализована возможность оставления заявок для библиотекарей**  
   Библиотекари могут создавать новые заявки через бота.  

7. **Реализован функционал просмотра заявок для инженеров**  
   Инженеры могут просматривать заявки, назначенные на них.  

8. **Добавлена автоматическая выдача прав пользователю, если он уже зарегистрирован**  
   При повторном входе пользователя его права автоматически восстанавливаются.  

9. **Реализовано удаление сообщений только при прохождении эндпоинта**  
   Сообщения удаляются только после успешного выполнения определенных действий.  

10. **Добавлена кнопка отмены для всех пользователей**  
    Пользователи могут отменять действия с помощью кнопки "Отмена".  

11. **Реализована логика кеша для хранения временных данных пользователя**  
    Временные данные пользователя сохраняются в кеше для удобства взаимодействия.  

12. **Удалена логика userID**  
    Логика работы с userID была упрощена для улучшения производительности.  

13. **Реализован функционал назначения заявок для администратора**  
    Администраторы могут назначать заявки конкретным инженерам.  

14. **Проведен рефакторинг: устранение избыточности и внедрение прямого логирования стандартизированными методами**  
    Код был оптимизирован, а логирование стандартизировано.  

15. **Добавлена возможность для инженеров отмечать заявки как выполненные**  
    Инженеры могут изменять статус заявок на "Выполнено".  

16. **Реализована возможность просмотра своих заявок для инженеров**  
    Инженеры видят только те заявки, которые назначены на них.  

17. **Реализована генерация и отправка ICS-файлов**  
    После назначения задачи инженеру, администратор получает ICS-файл для добавления в календарь.  

18. **Добавлена проверка прав пользователя**  
    Реализована система проверки прав доступа для различных действий.  

19. **Автоматически выдавать права пользователю, если он уже зарегистрирован**  
    При повторном входе права пользователя восстанавливаются автоматически.  

20. **Реализована проверка прав доступа (check permission)**  
    Добавлена функция проверки прав пользователя перед выполнением действий.  

---

#### Хронология выполнения задач

| Дата начала | Дата выполнения | Задача |
|------------|----------------|--------|
| 04.02.2025  | 05.02.2025 | Продуманы таблицы и написаны миграции для базы данных. |
|  |  | Выбрана библиотека для разработки бота и реализован слой представления. |
|  |  | Реализована обработка команды `/start` (регистрация пользователей). |
|  |  | Добавлена функция установки пароля от администратора. |
|  |  | Реализован функционал просмотра заявок для администратора. |
|  |  | Реализована возможность оставления заявок для библиотекарей. |
|  |  | Реализован функционал просмотра заявок для инженеров. |
|  |  | Добавлена автоматическая выдача прав пользователю, если он уже зарегистрирован. |
|  |  | Реализовано удаление сообщений только при прохождении эндпоинта. |
|  |  | Добавлена кнопка отмены для всех пользователей. |
|  |  | Реализована логика кеша для хранения временных данных пользователя. |
|  |  | Удалена логика userID. |
|  |  | Реализован функционал назначения заявок для администратора. |
|  |  | Проведен рефакторинг: устранение избыточности и внедрение прямого логирования стандартизированными методами. |
|  |  | Добавлена возможность для инженеров отмечать заявки как выполненные. |
|  |  | Реализована возможность просмотра своих заявок для инженеров. |
|  |  | Реализована генерация и отправка ICS-файлов. |
|  |  | Добавлена проверка прав пользователя. |
|  |  | Автоматически выдавать права пользователю, если он уже зарегистрирован. |
|  |  | Реализована проверка прав доступа (check permission). |

---

## Заключение  
В ходе практики были успешно выполнены как инвариантные, так и вариативные задачи. Разработанный Telegram-бот значительно упростил процесс работы с заявками в ЦБС Петроградского района, автоматизировав задачи и улучшив взаимодействие между сотрудниками.  